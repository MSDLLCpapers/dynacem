% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/future.R
\name{futurepv}
\alias{futurepv}
\title{Calculate present value for a payoff in a single cohort with dynamic pricing across multiple timepoints}
\usage{
futurepv(tzero = 0, payoffs, prices, discrate)
}
\arguments{
\item{tzero}{Time at the date of calculation, to be used in lookup in prices vector}

\item{payoffs}{Vector of payoffs of interest (numeric vector)}

\item{prices}{Vector of price indices through the time horizon of interest}

\item{discrate}{Discount rate per timestep, corresponding to price index}
}
\value{
A list \code{inputs}, \code{results} and \code{pv}.
The \code{inputs} list contains a list of the following parameters called with the function: \verb{uptakes, payoffs, horizon, tzero, prices}, and \code{discrate}.
The \code{results} output is a \code{class_dynpv} S7 object that contains the following elements:
\itemize{
\item \code{name}: Name given to the object
\item \code{df}: Tibble of calculation results
\item \code{ncoh}: Number of cohorts of uptaking patients (always 1)
\item \code{ntimes}: Number of times (unique values of tzero) at which calculations are performed
\item \code{uptake}: Total number of uptaking patients (always 1)
\item \code{total}: Total present value
\item \code{mean}: Average present value per uptaking patient (=total/uptake)
\item \code{sum_by_coh}: Tibble of summarized calculation results for each uptake cohort
\item \code{inputs}: list contains a list of the following parameters called with the function: \verb{uptakes, payoffs, horizon, tzero, prices}, and \code{discrate}.
The \code{pv} output is numeric, a convenience value equal to \verb{$results$mean}.
}
}
\description{
Present value of a series of payoffs for a single given cohort, entering at given future time, allowing for dynamic pricing. This function is a wrapper for \code{\link[=dynpv]{dynpv()}} restricted to evaluation of a single cohort.
}
\examples{
# Obtain dataset
democe <- get_dynfields(
   heemodel = oncpsm,
   payoffs = c("cost_daq_new", "cost_total", "qaly"),
   discount = "disc"
   )

# Obtain discount rate
discrate <- get_param_value(oncpsm, "disc")

# Obtain payoff vector of interest
payoffs <- democe |>
   dplyr::filter(int=="new") |>
   dplyr::mutate(cost_oth_rup = cost_total_rup - cost_daq_new_rup)
Nt <- nrow(payoffs)

# Run calculation for times 0-9
fpv <- futurepv(
  tzero = (0:9)*52,
  payoffs = payoffs$cost_oth_rup,
  prices = 1.001^(1:(2*Nt)-1), # Approx 5.3\% every 52 steps
  discrate = 0.001 + discrate
)
fpv$results
fpv$pv
}
\seealso{
\code{\link[=dynpv]{dynpv()}}
}

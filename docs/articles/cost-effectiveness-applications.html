<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cost Effectiveness Applications • dynamicpv</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Cost Effectiveness Applications">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dynamicpv</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cost-effectiveness-applications.html">Cost Effectiveness Applications</a>
    </li>
    <li>
      <a href="../articles/dynamic-pricing.html">Dynamic Pricing</a>
    </li>
    <li>
      <a href="../articles/dynamic-uptake.html">Dynamic Uptake</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MSDLLCpapers/dynacem/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Cost Effectiveness Applications</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MSDLLCpapers/dynacem/blob/HEAD/vignettes/cost-effectiveness-applications.Rmd" class="external-link"><code>vignettes/cost-effectiveness-applications.Rmd</code></a></small>
      <div class="hidden name"><code>cost-effectiveness-applications.Rmd</code></div>

    </div>

    
    
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>Cost-efffectiveness models evaluate the costs and health outcomes
associated with a decision, such as treating a patient with a particular
intervention, as compared with another. Such analyses depend on
measuring the incremental costs and health outcomes between the
different decisions, and considering which decision would be most
efficient, given the decision-maker’s economic perspective, time
horizon, and willingness-to-pay for any improvement in health outcomes.
Key to such analysis are the calculation of discounted (net) present
values of costs and health outcomes associated with each decision
option. Decisions about access to health care innovations are routinely
made by health technology assessment (HTA) bodies on the basis of
analyses in this form.</p>
<p>One of the problems with such analyses is that they are static in
terms of pricing and uptake assumptions. Uptake is static because the
analyses are conducted in respect of a single cohort of patients for
whom the decision must be made today. In contrast, the decision-maker is
likely to be making decisions on behalf of a gradual influx of patients
for whom the decision is relevant. That influx may be dependent on
disease prevalence, disease incidence, diagnosis patterns, progression
of disease, prior treatment patterns - any number of the factors that
health economists routinely consider in budget impact models, but not
cost-effectiveness modeling.</p>
<p>Pricing is static because the analyses typically assume that costs
will remain constant in real terms. When considering the
cost-effectiveness of medicines, the acquisition cost of those medicines
is a key component of the total cost. One thing we know about drug
acquisition costs is that they do not remain constant in real terms. In
the United States, companies often raise the Wholesale Acquisition Cost
(WAC) prices of branded medicines once or twice a year, and this can be
greater than inflation rates in the economy. After the exclusivity
period of those branded medicines, generics or biosimilars may become
available, and this wider supply can force down prices dramatically. In
Europe and elsewhere, companies are often prevented - either directly in
law or indirectly through HTA processes - from raising prices on branded
medicines. Therefore assuming static prices is often a highly flawed
assumption when using these analyses to make decisions about branded
medicines, whose price may vary in future years - but absolutely not
remain constant in real terms.</p>
<p>This vignette describes how to evaluate cost-effectiveness with and
without dynamic pricing and dynamic uptake, using the <em>dynamicpv</em>
package.</p>
<p>Before we begin, let us load the packages we need.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://MSDLLCpapers.github.io/dynacem/" class="external-link">dynamicpv</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://aphp.github.io/heemod/" class="external-link">heemod</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="assumptions">Assumptions<a class="anchor" aria-label="anchor" href="#assumptions"></a>
</h3>
<p>Before we start, we need to outline our assumptions. These
concern:</p>
<ul>
<li>the decision problem we are modeling through a cost-effectiveness
analysis</li>
<li>dynamic patient uptake</li>
<li>dynamic pricing</li>
</ul>
<div class="section level4">
<h4 id="decision-problem-we-are-modeling">Decision problem we are modeling<a class="anchor" aria-label="anchor" href="#decision-problem-we-are-modeling"></a>
</h4>
<p>We wish to evaluate the cost-effectiveness, measured as incremental
cost per QALY, of a new intervention compared to the standard of care
(SoC). The model is a partitioned survival analysis typical in oncology
with three health states: progression-free (PF), progressive disease
(PD) and death, with additional assumptions as follows:</p>
<ul>
<li>The time horizon is 20 years, a timestep is 1 week, discounting is
at 3% per year, with an effective date of calculation is
2025-06-01.</li>
<li>For SoC, progression-free survival (PFS) is modeled as an
exponential distribution with mean of 50 weeks; overall survival (OS) in
weeks is modelled according to a lognormal distribution with mean and
standard deviation on the log scale as 4 and 1 respectively.</li>
<li>The effect of the new intervention relative to the SoC is a hazard
ratio of 0.5 on PFS and 0.6 on OS.</li>
<li>Health utility is 0.8 in the PF state and 0.6 in the PD state.</li>
<li>Drug acquisition costs are $400 and $1500 per week for SoC and the
new intervention respectively, incurred throughout a patient’s time in
the PF state (treat to progression).</li>
<li>Drug administration costs are $50 and $75 per week on treatment for
SoC and the new intervention respectively.</li>
<li>Adverse events occur in 0.08% and 0.10% of SoC and new intervention
patients per week respectively, while on treatment, at an average cost
of $2000 per event.</li>
<li>Disease management costs are $80 per week in PF and $20 per week in
PD.</li>
<li>Patients receive the treatment of interest (new or SoC) until
progression. Subsequent treatment costs are $1200 and $300 per week per
patient while in the PD state for SoC and new intervention patients
respectively.</li>
</ul>
<p>This model may be coded in <em>heemod</em> as follows.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Time constants</span></span>
<span><span class="va">days_in_year</span> <span class="op">&lt;-</span> <span class="fl">365.25</span></span>
<span><span class="va">days_in_week</span> <span class="op">&lt;-</span> <span class="fl">7</span></span>
<span><span class="va">cycle_years</span> <span class="op">&lt;-</span> <span class="va">days_in_week</span> <span class="op">/</span> <span class="va">days_in_year</span> <span class="co"># Duration of a one week cycle in years</span></span>
<span></span>
<span><span class="co"># Time horizon (years) and number of cycles</span></span>
<span><span class="va">thoz</span> <span class="op">&lt;-</span> <span class="fl">20</span></span>
<span><span class="va">Ncycles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a></span><span class="op">(</span><span class="va">thoz</span><span class="op">/</span><span class="va">cycle_years</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Real discounting</span></span>
<span><span class="va">disc_year</span> <span class="op">&lt;-</span> <span class="fl">0.03</span> <span class="co"># Per year</span></span>
<span><span class="va">disc_cycle</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="va">disc_year</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="va">cycle_years</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span> <span class="co"># Per cycle</span></span>
<span></span>
<span><span class="co"># Price inflation</span></span>
<span><span class="va">infl_year</span> <span class="op">&lt;-</span> <span class="fl">0.025</span> <span class="co"># Per year</span></span>
<span><span class="va">infl_cycle</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="va">infl_year</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="va">cycle_years</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span> <span class="co"># Per cycle</span></span>
<span></span>
<span><span class="co"># Nominal discounting</span></span>
<span><span class="va">nomdisc_year</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="va">disc_year</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="va">infl_year</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span></span>
<span><span class="va">nomdisc_cycle</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="va">nomdisc_year</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="va">cycle_years</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span> <span class="co"># Per cycle</span></span>
<span></span>
<span><span class="co"># State names</span></span>
<span><span class="va">state_names</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  progression_free <span class="op">=</span> <span class="st">"PF"</span>,</span>
<span>  progression <span class="op">=</span> <span class="st">"PD"</span>,</span>
<span>  death <span class="op">=</span> <span class="st">"Death"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># PFS distribution for SoC with Exp() distribution and mean of 50 weeks</span></span>
<span><span class="va">surv_pfs_soc</span> <span class="op">&lt;-</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/define_surv_dist.html" class="external-link">define_surv_dist</a></span><span class="op">(</span></span>
<span>  distribution <span class="op">=</span> <span class="st">"exp"</span>,</span>
<span>  rate <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">50</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># OS distribution for SoC with Lognorm() distribution, meanlog = 4.5, sdlog = 1</span></span>
<span><span class="co"># This implies a mean of exp(4 + 0.5 * 1^2) = exp(4.5) = 90 weeks</span></span>
<span><span class="va">surv_os_soc</span> <span class="op">&lt;-</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/define_surv_dist.html" class="external-link">define_surv_dist</a></span><span class="op">(</span></span>
<span>  distribution <span class="op">=</span> <span class="st">"lnorm"</span>,</span>
<span>  meanlog <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  sdlog <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># PFS and OS distributions for new</span></span>
<span><span class="va">surv_pfs_new</span> <span class="op">&lt;-</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/apply_hr.html" class="external-link">apply_hr</a></span><span class="op">(</span><span class="va">surv_pfs_soc</span>, hr<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="va">surv_os_new</span> <span class="op">&lt;-</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/apply_hr.html" class="external-link">apply_hr</a></span><span class="op">(</span><span class="va">surv_os_soc</span>, hr<span class="op">=</span><span class="fl">0.6</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define partitioned survival model, soc</span></span>
<span><span class="va">psm_soc</span> <span class="op">&lt;-</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/define_part_surv.html" class="external-link">define_part_surv</a></span><span class="op">(</span></span>
<span>  pfs <span class="op">=</span> <span class="va">surv_pfs_soc</span>,</span>
<span>  os <span class="op">=</span> <span class="va">surv_os_soc</span>,</span>
<span>  terminal_state <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  state_names <span class="op">=</span> <span class="va">state_names</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Define partitioned survival model, soc</span></span>
<span><span class="va">psm_new</span> <span class="op">&lt;-</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/define_part_surv.html" class="external-link">define_part_surv</a></span><span class="op">(</span></span>
<span>  pfs <span class="op">=</span> <span class="va">surv_pfs_new</span>,</span>
<span>  os <span class="op">=</span> <span class="va">surv_os_new</span>,</span>
<span>  terminal_state <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  state_names <span class="op">=</span> <span class="va">state_names</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Parameters</span></span>
<span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/define_parameters.html" class="external-link">define_parameters</a></span><span class="op">(</span></span>
<span>  <span class="co"># Discount rate</span></span>
<span>  disc <span class="op">=</span> <span class="va">disc_cycle</span>,</span>
<span>  <span class="co"># Disease management costs</span></span>
<span>  cman_pf <span class="op">=</span> <span class="fl">80</span>,</span>
<span>  cman_pd <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  <span class="co"># Drug acquisition costs - the SoC regime only uses SoC drug, the New regime only uses New drug</span></span>
<span>  cdaq_soc <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/dispatch_strategy.html" class="external-link">dispatch_strategy</a></span><span class="op">(</span></span>
<span>    soc <span class="op">=</span> <span class="fl">400</span>,</span>
<span>    new <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span>,</span>
<span>  cdaq_new <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/dispatch_strategy.html" class="external-link">dispatch_strategy</a></span><span class="op">(</span></span>
<span>    soc <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    new <span class="op">=</span> <span class="fl">1500</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># Drug administration costs</span></span>
<span>  cadmin <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/dispatch_strategy.html" class="external-link">dispatch_strategy</a></span><span class="op">(</span></span>
<span>    soc <span class="op">=</span> <span class="fl">50</span>,</span>
<span>    new <span class="op">=</span> <span class="fl">75</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># Adverse event risks</span></span>
<span>  risk_ae <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/dispatch_strategy.html" class="external-link">dispatch_strategy</a></span><span class="op">(</span></span>
<span>    soc <span class="op">=</span> <span class="fl">0.08</span>,</span>
<span>    new <span class="op">=</span> <span class="fl">0.1</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># Adverse event average costs</span></span>
<span>  uc_ae <span class="op">=</span> <span class="fl">2000</span>,</span>
<span>  <span class="co"># Subsequent treatments</span></span>
<span>  csubs <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/dispatch_strategy.html" class="external-link">dispatch_strategy</a></span><span class="op">(</span></span>
<span>    soc <span class="op">=</span> <span class="fl">1200</span>,</span>
<span>    new <span class="op">=</span> <span class="fl">300</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># Health state utilities</span></span>
<span>  u_pf <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  u_pd <span class="op">=</span> <span class="fl">0.6</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define PF states</span></span>
<span><span class="va">state_PF</span> <span class="op">&lt;-</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/define_state.html" class="external-link">define_state</a></span><span class="op">(</span></span>
<span>  <span class="co"># Costs for the state</span></span>
<span>  cost_daq_soc <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/discount.html" class="external-link">discount</a></span><span class="op">(</span><span class="va">cdaq_soc</span>, <span class="va">disc_cycle</span><span class="op">)</span>,</span>
<span>  cost_daq_new <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/discount.html" class="external-link">discount</a></span><span class="op">(</span><span class="va">cdaq_new</span>, <span class="va">disc_cycle</span><span class="op">)</span>,</span>
<span>  cost_dadmin <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/discount.html" class="external-link">discount</a></span><span class="op">(</span><span class="va">cadmin</span>, <span class="va">disc_cycle</span><span class="op">)</span>,</span>
<span>  cost_dman <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/discount.html" class="external-link">discount</a></span><span class="op">(</span><span class="va">cman_pf</span>, <span class="va">disc_cycle</span><span class="op">)</span>,  </span>
<span>  cost_ae <span class="op">=</span> <span class="va">risk_ae</span> <span class="op">*</span> <span class="va">uc_ae</span>,</span>
<span>  cost_subs <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cost_total <span class="op">=</span> <span class="va">cost_daq_soc</span> <span class="op">+</span> <span class="va">cost_daq_new</span> <span class="op">+</span> <span class="va">cost_dadmin</span> <span class="op">+</span> <span class="va">cost_dman</span> <span class="op">+</span> <span class="va">cost_ae</span> <span class="op">+</span> <span class="va">cost_subs</span>,</span>
<span>  <span class="co"># Health utility, QALYs and life years</span></span>
<span>  pf_year <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/discount.html" class="external-link">discount</a></span><span class="op">(</span><span class="va">cycle_years</span>, <span class="va">disc_cycle</span><span class="op">)</span>,</span>
<span>  life_year <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/discount.html" class="external-link">discount</a></span><span class="op">(</span><span class="va">cycle_years</span>, <span class="va">disc_cycle</span><span class="op">)</span>,</span>
<span>  qaly <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/discount.html" class="external-link">discount</a></span><span class="op">(</span><span class="va">cycle_years</span> <span class="op">*</span> <span class="va">u_pf</span>, <span class="va">disc_cycle</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Define PD states</span></span>
<span><span class="va">state_PD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/define_state.html" class="external-link">define_state</a></span><span class="op">(</span></span>
<span>  <span class="co"># Costs for the state</span></span>
<span>  cost_daq_soc <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cost_daq_new <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cost_dadmin <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cost_dman <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/discount.html" class="external-link">discount</a></span><span class="op">(</span><span class="va">cman_pd</span>, <span class="va">disc_cycle</span><span class="op">)</span>,  </span>
<span>  cost_ae <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cost_subs <span class="op">=</span> <span class="fu"><a href="https://aphp.github.io/heemod/reference/discount.html" class="external-link">discount</a></span><span class="op">(</span><span class="va">csubs</span>, <span class="va">disc_cycle</span><span class="op">)</span>,</span>
<span>  cost_total <span class="op">=</span> <span class="va">cost_daq_soc</span> <span class="op">+</span> <span class="va">cost_daq_new</span> <span class="op">+</span> <span class="va">cost_dadmin</span> <span class="op">+</span> <span class="va">cost_dman</span> <span class="op">+</span> <span class="va">cost_ae</span> <span class="op">+</span> <span class="va">cost_subs</span>,</span>
<span>  <span class="co"># Health utility, QALYs and life years</span></span>
<span>  pf_year <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  life_year <span class="op">=</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/discount.html" class="external-link">discount</a></span><span class="op">(</span><span class="va">cycle_years</span>, <span class="va">disc_cycle</span><span class="op">)</span>,</span>
<span>  qaly <span class="op">=</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/discount.html" class="external-link">discount</a></span><span class="op">(</span><span class="va">cycle_years</span> <span class="op">*</span> <span class="va">u_pd</span>, <span class="va">disc_cycle</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Define Death state</span></span>
<span><span class="va">state_Death</span> <span class="op">&lt;-</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/define_state.html" class="external-link">define_state</a></span><span class="op">(</span></span>
<span>  <span class="co"># Costs are zero</span></span>
<span>  cost_daq_soc <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cost_daq_new <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cost_dadmin <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cost_dman <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cost_ae <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cost_subs <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  cost_total <span class="op">=</span> <span class="va">cost_daq_soc</span> <span class="op">+</span> <span class="va">cost_daq_new</span> <span class="op">+</span> <span class="va">cost_dadmin</span> <span class="op">+</span> <span class="va">cost_dman</span> <span class="op">+</span> <span class="va">cost_ae</span> <span class="op">+</span> <span class="va">cost_subs</span>,</span>
<span>  <span class="co"># Health outcomes are zero</span></span>
<span>  pf_year <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  life_year <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  qaly <span class="op">=</span> <span class="fl">0</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define strategy for SoC</span></span>
<span><span class="va">strat_soc</span> <span class="op">&lt;-</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/define_strategy.html" class="external-link">define_strategy</a></span><span class="op">(</span></span>
<span>    transition <span class="op">=</span> <span class="va">psm_soc</span>,</span>
<span>    <span class="st">"PF"</span> <span class="op">=</span> <span class="va">state_PF</span>,</span>
<span>    <span class="st">"PD"</span> <span class="op">=</span> <span class="va">state_PD</span>,</span>
<span>    <span class="st">"Death"</span> <span class="op">=</span> <span class="va">state_Death</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Define strategy for new</span></span>
<span><span class="va">strat_new</span> <span class="op">&lt;-</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/define_strategy.html" class="external-link">define_strategy</a></span><span class="op">(</span></span>
<span>  transition <span class="op">=</span> <span class="va">psm_new</span>,</span>
<span>  <span class="st">"PF"</span> <span class="op">=</span> <span class="va">state_PF</span>,</span>
<span>  <span class="st">"PD"</span> <span class="op">=</span> <span class="va">state_PD</span>,</span>
<span>  <span class="st">"Death"</span> <span class="op">=</span> <span class="va">state_Death</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create heemod model</span></span>
<span><span class="va">oncpsm</span> <span class="op">&lt;-</span> <span class="fu">heemod</span><span class="fu">::</span><span class="fu"><a href="https://aphp.github.io/heemod/reference/run_model.html" class="external-link">run_model</a></span><span class="op">(</span></span>
<span>  soc <span class="op">=</span> <span class="va">strat_soc</span>,</span>
<span>  new <span class="op">=</span> <span class="va">strat_new</span>,</span>
<span>  parameters <span class="op">=</span> <span class="va">params</span>,</span>
<span>  cycles <span class="op">=</span> <span class="va">Ncycles</span>,</span>
<span>  cost <span class="op">=</span> <span class="va">cost_total</span>,</span>
<span>  effect <span class="op">=</span> <span class="va">qaly</span>,</span>
<span>  init <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"life-table"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required namespace: flexsurv</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="dynamic-pricing">Dynamic pricing<a class="anchor" aria-label="anchor" href="#dynamic-pricing"></a>
</h4>
<p>Costs are assumed to increases in line with general inflation (2.5%
per year), except for effects on drug acquisition costs due to LoEs. The
LoE for the SoC is assumed to occur first, at 2028-01-01, after which
there is anticipated to be a 70% reduction in prices over one year. The
new intervention has an LoE occuring three years later, at 2031-01-01,
after which there would be a 50% reduction in prices over one year.</p>
</div>
<div class="section level4">
<h4 id="dynamic-patient-uptake">Dynamic patient uptake<a class="anchor" aria-label="anchor" href="#dynamic-patient-uptake"></a>
</h4>
<p>A disease incidence of 1 patient per timestep is assumed, with zero
prevalence for simplicity. Under the decision problem to be evaluated,
when the new intervention is available, uptake is assumed to rise
linearly from 0% to 100% after 2 years. In this way, uptake would be
gradually increasing with time, accounting for disease epidemiology and
the share of patients who receive the new intervention.</p>
</div>
</div>
<div class="section level3">
<h3 id="using-dynamicpv">Using <em>dynamicpv</em><a class="anchor" aria-label="anchor" href="#using-dynamicpv"></a>
</h3>
<div class="section level4">
<h4 id="without-dynamic-pricing-or-dynamic-uptake">Without dynamic pricing or dynamic uptake<a class="anchor" aria-label="anchor" href="#without-dynamic-pricing-or-dynamic-uptake"></a>
</h4>
<p>The conventional cost-effectiveness model is static.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oncpsm</span></span>
<span><span class="co">#&gt; 2 strategies run for 1044 cycles.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Initial state counts:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; PF = 1</span></span>
<span><span class="co">#&gt; PD = 0</span></span>
<span><span class="co">#&gt; Death = 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Counting method: 'life-table'.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Values:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     cost_daq_soc cost_daq_new cost_dadmin cost_dman   cost_ae cost_subs</span></span>
<span><span class="co">#&gt; soc     19455.25          0.0    2431.906  4601.624  8000.267  42634.43</span></span>
<span><span class="co">#&gt; new         0.00     141997.2    7099.860  8666.132 19999.582  16394.22</span></span>
<span><span class="co">#&gt;     cost_total   pf_year life_year     qaly</span></span>
<span><span class="co">#&gt; soc   77123.47 0.9321475  1.613053 1.154261</span></span>
<span><span class="co">#&gt; new  194156.99 1.8142467  2.861562 2.079786</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Efficiency frontier:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; soc -&gt; new</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Differences:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     Cost Diff. Effect Diff.   ICER Ref.</span></span>
<span><span class="co">#&gt; new   117033.5    0.9255249 126451  soc</span></span></code></pre></div>
<p>Let’s examine each payoff more closely.</p>
</div>
</div>
<div class="section level2">
<h2 id="derive-the-dataset-necessary-for-the-dynamic-pricinguptake-calculations">Derive the dataset necessary for the dynamic pricing/uptake
calculations<a class="anchor" aria-label="anchor" href="#derive-the-dataset-necessary-for-the-dynamic-pricinguptake-calculations"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">payoffs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_dynfields.html">get_dynfields</a></span><span class="op">(</span></span>
<span>    heemodel <span class="op">=</span> <span class="va">oncpsm</span>,</span>
<span>    payoffs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cost_daq_new"</span>, <span class="st">"cost_total"</span>, <span class="st">"qaly"</span>, <span class="st">"life_year"</span><span class="op">)</span>,</span>
<span>    discount <span class="op">=</span> <span class="st">"disc"</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># View the extracted data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">payoffs</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 11</span></span></span>
<span><span class="co">#&gt;   model_time cost_daq_new cost_total   qaly life_year int      vt</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>          1            0       695. 0.015<span style="text-decoration: underline;">3</span>    0.019<span style="text-decoration: underline;">2</span> soc   1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>          2            0       705. 0.015<span style="text-decoration: underline;">2</span>    0.019<span style="text-decoration: underline;">1</span> soc   0.999</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>          3            0       714. 0.015<span style="text-decoration: underline;">1</span>    0.019<span style="text-decoration: underline;">1</span> soc   0.999</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>          4            0       721. 0.015<span style="text-decoration: underline;">0</span>    0.019<span style="text-decoration: underline;">1</span> soc   0.998</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>          5            0       726. 0.014<span style="text-decoration: underline;">9</span>    0.019<span style="text-decoration: underline;">0</span> soc   0.998</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>          6            0       730. 0.014<span style="text-decoration: underline;">8</span>    0.018<span style="text-decoration: underline;">9</span> soc   0.997</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 more variables: cost_daq_new_rup &lt;dbl&gt;, cost_total_rup &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   qaly_rup &lt;dbl&gt;, life_year_rup &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Look how the incremental costs and QALYs from the static model match
the sum of the payoffs.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">payoffs</span><span class="op">$</span><span class="va">cost_total</span><span class="op">[</span><span class="va">payoffs</span><span class="op">$</span><span class="va">int</span><span class="op">==</span><span class="st">"new"</span><span class="op">]</span><span class="op">)</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">payoffs</span><span class="op">$</span><span class="va">cost_total</span><span class="op">[</span><span class="va">payoffs</span><span class="op">$</span><span class="va">int</span><span class="op">==</span><span class="st">"soc"</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 117033.5</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">payoffs</span><span class="op">$</span><span class="va">qaly</span><span class="op">[</span><span class="va">payoffs</span><span class="op">$</span><span class="va">int</span><span class="op">==</span><span class="st">"new"</span><span class="op">]</span><span class="op">)</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">payoffs</span><span class="op">$</span><span class="va">qaly</span><span class="op">[</span><span class="va">payoffs</span><span class="op">$</span><span class="va">int</span><span class="op">==</span><span class="st">"soc"</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.9255249</span></span></code></pre></div>
<div class="section level4">
<h4 id="with-dynamic-pricing-but-without">With dynamic pricing, but without<a class="anchor" aria-label="anchor" href="#with-dynamic-pricing-but-without"></a>
</h4>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Dominic Muston, Merck &amp; Co., Inc., Rahway, NJ, USA and its affiliates.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
